---
title: "Data 698 - Final Project Proposal"
subtitle: "Predicting Winning New York Mega Millions Lottery Numbers"
author: "Stephen Haslett, Richard Zheng"
date: "2/13/2022"
output:
 html_document:
    toc: true
    toc_float: true
    theme: flatly
    highlight: tango
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(kableExtra)
```


![](./images/MegaMillionsLogo.png)

## Introduction

The purpose of this investigation is to establish whether or not it is possible to predict future winning lottery numbers based on past winning results. To do this, we will analyze the past 20 years of winning numbers for the [Mega Millions](https://nylottery.ny.gov/draw-game/?game=megamillions) lottery game to answer the following questions:

- Is it possible to predict future winning lottery numbers based on previous results?

- Can a pattern be identified regarding which winning numbers are drawn most often per game over time?

- Does using these numbers increase our chances of winning?

- In terms of winning, is it better to play the same numbers, or pick different numbers every game?

- What strategies can be applied to ensure our chances of winning are increased (if any)?

- How to winning numbers correlate to payout amount?

- What statistical theories are applicable to our goal, and which theories can benefit us (if any):
    - [Law of Large Numbers](https://en.wikipedia.org/wiki/Law_of_large_numbers)
    - [Monty Hall Problem](https://en.wikipedia.org/wiki/Monty_Hall_problem)
    - [Gambler's Fallacy](https://en.wikipedia.org/wiki/Gambler%27s_fallacy)
 
Similar to previous studies, we want to understand weather or not it is possible to obtain an edge when playing the lottery. 
With the Data we have gathered (From nylottery and the megamillions websites) we will study the trends present in that data along with simulatings to answer these questions. 
In addition to testing various "winning strategies" we also want to explore the various payouts, as jackpot numbers change, and the expected values of playing the lottery.


### Mega Millions Lottery Game

Mega Millions is a US multi-state lottery game that is drawn twice a week on Tuesdays and Fridays. 
To participate in the game, players purchase one or more lottery tickets at a cost of $2 per ticket. 
Players must pick **5** _unique numbers_ from **1** to **70**, and **1** number from **1** to **25** for the _Mega Ball_. 
Optionally, players can opt for randomly selected numbers at the time of ticket purchase.

### Mega Millions Lottery Game Rules

Lottery numbers are drawn randomly **twice** a week on _Tuesdays_ and _Fridays_ at 11PM (EST). 
50% of lottery ticket sales is allocated as prize money (_75% of which is__used for the jackpot payout_). 
If all of the numbers selected by the player (_including the Mega Ball_) are drawn, then the player wins the jackpot. 
If multiple players win the jackpot, then the jackpot is divided equally among the winning players. 
If no one wins the jackpot for a particular drawing, then the jackpot amount rolls over to the next drawing. 
The remaining 25% of the prize money is then allocated to lower tiered prizes.

**Mega Millions Prize Tiers**

```{r, prizeTiers, echo=FALSE, message=FALSE, warning=FALSE}
tableData <- data.frame(c("Jackpot", "Second Prize", "Third Prize", "Fourth Prize", "Fifth Prize",  "Sixth Prize", "Seventh Prize", "Eighth Prize", "Ninth Prize"),
                        c("5 matching numbers with the Mega Ball", "5 matching numbers", "4 matching numbers with the Mega Ball",
                          "4 matching numbers", "3 matching numbers with the Mega Ball", "3 matching numbers", "2 matching numbers with the Mega Ball",
                          "1 matching number with the Mega Ball", "No matching numbers with the Mega Ball"),
                        c("75% of total prize money", "$1,000,000", "$10,000", "$500", "$200", "$10", "$10", "$4", "$2"),
                        c("1 in 302,575,350", "1 in 12,607,306", "1 in 931,001", "1 in 38,792", "1 in 14,547", "1 in 606", "1 in 693", "1 in 89", "1 in 37"))
                          
colnames(tableData) <- c("Prize", "Winning Criterion", "Payout", "Odds of Winning")

kable(tableData, caption = 'Prize Tiers and Payouts') %>%
      kable_styling(bootstrap_options = c('striped', 'hover', 'condensed', 'responsive')) %>% 
      scroll_box(width = '100%')
```

\ 

Additionally, Players can pay an extra dollar to purchase a multiplier number. 
Multiplier numbers range from **2** to **5**. 
If a player picks a winning multiplier number and also winning lottery numbers, then the payout for the winning lottery numbers will be multiplied by the winning multiplier number. 


### Relevant Academic Papers

[Predicting Lotto Numbers](https://www.parisschoolofeconomics.eu/IMG/pdf/suetens_paper.pdf)



## Data Source

The main dataset that will be used for this project can be found on the [NY Open Data](https://data.ny.gov/) website, and contains biweekly winning Mega Millions lottery numbers from 2002, through the current week. 
The dataset is in CSV format and can be accessed here - [Lottery Mega Millions Winning Numbers: Beginning 2002](https://data.ny.gov/Government-Finance/Lottery-Mega-Millions-Winning-Numbers-Beginning-20/5xaw-6ayf/data). 

Winning history: https://www.megamillions.com/jackpot-history

Drawing history: https://www.megamillions.com/Winning-Numbers/Previous-Drawings.aspx

As of writing, the set consists of 2058 observations broken into 4 columns:

- **Draw Date**: _The date on which the lottery draw took place_.
- **Winning Numbers**: _The winning numbers for the given lottery draw_.
- **Mega Ball**: _The winning Mega Ball for the draw_.
- **Multiplier**: _The winning multiplier number for the draw_.

## Approach

It is impossible to evaluate our predictions against future winning lottery numbers so we will split the dataset into separate training, and test sets. 
The training set will be used to identify winning number patterns, and the test set will be used to establish if our predictions influence the winning numbers.

### Lottery Number Selection Strategies

There are several lottery number selection strategies that we need to simulate:

##### **Random Number Selection**

To simulate picking random lottery numbers, we will write a number generator in R that generates 6 random numbers (_5 unique numbers, and 1 Mega Ball number_) within the range of numbers that the game is based on (_1 to 70_ for the unique numbers, and _1 to 25_ for the Mega Ball). 
We will also generate a random **Multiplier** number within the range of _2 to 5_.

##### **Frequent Winning Number Selection**

In order to evaluate which selection strategy (_if any_) is most effective, we will compare our selections against our test data to evaluate which selection strategy results in winning selections most often. 
